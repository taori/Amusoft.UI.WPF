<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Amusoft.UI.WPF.Controls"
    xmlns:converters="clr-namespace:Amusoft.UI.WPF.Converters">

	<converters:AnchorPositionToHorizontalAlignmentConverter x:Key="AnchorPositionToHorizontalAlignmentConverter"/>
	<converters:AnchorPositionToVerticalAlignmentConverter x:Key="AnchorPositionToVerticalAlignmentConverter"/>
	<Style TargetType="{x:Type local:NotificationDisplay}">
		<Setter Property="Padding" Value="10"/>
		<Setter Property="Template">
			<Setter.Value>
				<ControlTemplate TargetType="{x:Type local:NotificationDisplay}">
					<Border Background="{TemplateBinding Background}"
					        HorizontalAlignment="{Binding Path=AnchorPosition, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource AnchorPositionToHorizontalAlignmentConverter}}"
					        VerticalAlignment="{Binding Path=AnchorPosition, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource AnchorPositionToVerticalAlignmentConverter}}"
					        BorderBrush="{TemplateBinding BorderBrush}"
					        BorderThickness="{TemplateBinding BorderThickness}">
						<ItemsControl 
							ItemContainerStyle="{TemplateBinding ItemContainerStyle}"
							AlternationCount="{TemplateBinding AlternationCount}"
							DisplayMemberPath="{TemplateBinding DisplayMemberPath}"
							GroupStyleSelector="{TemplateBinding GroupStyleSelector}"
							IsTextSearchCaseSensitive="{TemplateBinding IsTextSearchCaseSensitive}"
							IsTextSearchEnabled="{TemplateBinding IsTextSearchEnabled}"
							ItemTemplate="{TemplateBinding ItemTemplate}"
							ItemsPanel="{TemplateBinding ItemsPanel}"
							MinWidth="{TemplateBinding MinWidth}"
							MinHeight="{TemplateBinding MinHeight}"
							MaxHeight="{TemplateBinding MaxHeight}"
							MaxWidth="{TemplateBinding MaxWidth}"
							Style="{TemplateBinding Style}"
							Padding="{TemplateBinding Padding}"
							Margin="{TemplateBinding Margin}"
							LayoutTransform="{TemplateBinding LayoutTransform}"
							RenderTransform="{TemplateBinding RenderTransform}"
							Background="{TemplateBinding Background}"
							BorderBrush="{TemplateBinding BorderBrush}"
							BorderThickness="{TemplateBinding BorderThickness}"
							ItemsSource="{TemplateBinding ItemsSource}"/>
					</Border>
				</ControlTemplate>
			</Setter.Value>
		</Setter>
	</Style>

	<DataTemplate DataType="{x:Type local:SimpleNotification}">
		<Border CornerRadius="5" Background="DarkRed" IsHitTestVisible="True"
		        Margin="0,1" Padding="10,5">
			<Border.LayoutTransform>
				<ScaleTransform/>
			</Border.LayoutTransform>
			<Border.Style>
				<Style TargetType="{x:Type Border}">
					<Style.Triggers>
						<DataTrigger Binding="{Binding Path=IsVisible, UpdateSourceTrigger=PropertyChanged}" Value="True">
							<Setter Property="Background" Value="Yellow"/>
							<DataTrigger.EnterActions>
								<BeginStoryboard>
									<Storyboard >
										<DoubleAnimation Storyboard.TargetProperty="(ScaleTransform.ScaleY)"
											To="2.0" Duration="0:0:2"/>
									</Storyboard>
								</BeginStoryboard>
							</DataTrigger.EnterActions>
						</DataTrigger>
						<DataTrigger Binding="{Binding Path=IsVisible, UpdateSourceTrigger=PropertyChanged}" Value="False">
							<Setter Property="Background" Value="Green"/>
							<DataTrigger.EnterActions>
								<BeginStoryboard>
									<Storyboard >
										<DoubleAnimation Storyboard.TargetProperty="(ScaleTransform.ScaleY)"
											To="1.0" Duration="0:0:2"/>
									</Storyboard>
								</BeginStoryboard>
							</DataTrigger.EnterActions>
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</Border.Style>
			<StackPanel Orientation="Horizontal">
				<TextBlock Text="{Binding Path=IsVisible, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,10,0"
						   VerticalAlignment="Center"
				           Foreground="White"/>
				<TextBlock Text="{Binding Path=Text}"
						   VerticalAlignment="Center"
				           Foreground="White"/>
				<Button Content="X" Command="{Binding Path=CloseCommand, Mode=OneWay}" Padding="10" Margin="5,0,0,0"/>
			</StackPanel>
		</Border>
	</DataTemplate>
</ResourceDictionary>
